---
title: "How to Test"
date: "2026-01-10"
summary: "LLVM Test"
tags: ["etc", "build", "test"]
draft: false
---
소스 수정했고
Target 은 AArch64 였다고 하자.

1) 일단 ninja llc를 한다.
llc는 코어라이브러리를 링크하는 가장 기본적인 툴이라서, 빌드시 컴파일 에러를 잡을 수 있는 것.

2) 그 다음 unittests/Target/AArch64 디렉토리에 있는 테스트 소스를 컴파일 하고 실행 가능한 바이너리로 만들 수 있도록
ninja AArch64Tests 를 입력한다.

* 근데 ninja: error: unknown target 에러가 나올수 있다.
이럴때는 ninja -t targets | grep AArch64 | grep Tests 로 현재 빌드 가능한 모든 타겟 종목 중에서 있는지 체크해보자.
만약 결과가 아무것도 안나옸다면 CMake 설정을 건드려야함.
보통 LLVM 처음 빌드할때는 host 아키텍쳐 (X86) 만 빌드하도록 설정하는 경우가 많다.
AArch64 관련 코드를 테스트 하려면 AArch64 백엔드가 빌드 목록에 포함되어 있어야 한다.
build 디렉토리에서 아래 명령어로 설정을 체크해봐라.

```
grep "LLVM_TARGETS_TO_BUILD" CMakeCache.txt
```

여기서 AArch64 가 당연히 없을거임. 그려면 CMake로 다시 돌려야 함.

```
# build 디렉토리에서 실행
cmake -G Ninja -DLLVM_TARGETS_TO_BUILD="X86;AArch64" ../llvm
```

그리고 ninja 다시 해보면 잘 됨.

3) 마지막으로 내가 구현한 테스트가 잘 되는지 체크하려면 아래같이 하면 된다.
```
./unittests/Target/AArch64/AArch64Tests --gtest_filter="*ComputeNumSignBits_ABDS*"
```

![테스트 결과](/blog/images/Capture-2.png)
