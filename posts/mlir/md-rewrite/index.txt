1:"$Sreact.fragment"
2:I[22016,["/blog/_next/static/chunks/796e69ae18b2784c.js"],""]
3:I[39756,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"default"]
4:I[37457,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"default"]
6:I[97367,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
7:"$Sreact.suspense"
9:I[97367,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"ViewportBoundary"]
b:I[97367,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"MetadataBoundary"]
d:I[68027,[],"default"]
:HL["/blog/_next/static/chunks/d335db6b3f1a2619.css","style"]
:HL["https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css","style",{"crossOrigin":"anonymous","integrity":"sha384-n8MVd4RsNIU0KOVEMVIqhKyMVPsoloXttrTHYUjDkaWaXIhKbMCh2GbqNl2CAPFu"}]
0:{"P":null,"b":"yJyOuqOSG9AtNtUpmWHuI","c":["","posts","mlir","md-rewrite",""],"q":"","i":false,"f":[[["",{"children":["posts",{"children":[["slug","mlir/md-rewrite","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/blog/_next/static/chunks/d335db6b3f1a2619.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","script","script-0",{"src":"/blog/_next/static/chunks/796e69ae18b2784c.js","async":true,"nonce":"$undefined"}]],["$","html",null,{"lang":"ko","children":[["$","head",null,{"children":["$","link",null,{"rel":"stylesheet","href":"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css","integrity":"sha384-n8MVd4RsNIU0KOVEMVIqhKyMVPsoloXttrTHYUjDkaWaXIhKbMCh2GbqNl2CAPFu","crossOrigin":"anonymous"}]}],["$","body",null,{"children":["$","main",null,{"children":[["$","header",null,{"style":{"display":"flex","justifyContent":"space-between","alignItems":"baseline","gap":12},"children":[["$","h1",null,{"style":{"margin":"8px 0"},"children":["$","$L2",null,{"href":"/","style":{"textDecoration":"none"},"children":"CPIST's blog"}]}],["$","nav",null,{"style":{"display":"flex","gap":12},"children":["$","$L2",null,{"href":"/posts","children":"Posts"}]}]]}],["$","hr",null,{"style":{"border":0,"borderTop":"1px solid #eee","margin":"12px 0 24px"}}],["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}],["$","footer",null,{"style":{"marginTop":48,"paddingTop":16,"borderTop":"1px solid #eee","color":"#666"},"children":["© ",2026," CPIST's blog"]}]]}]}]]}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":["$L5",[["$","script","script-0",{"src":"/blog/_next/static/chunks/631eeae4923b8465.js","async":true,"nonce":"$undefined"}]],["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],["$","$1","h",{"children":[null,["$","$L9",null,{"children":"$@a"}],["$","div",null,{"hidden":true,"children":["$","$Lb",null,{"children":["$","$7",null,{"name":"Next.Metadata","children":"$@c"}]}]}],null]}],false]],"m":"$undefined","G":["$d",[]],"S":true}
5:["$","article",null,{"children":[["$","div",null,{"style":{"color":"#666","marginBottom":6},"children":["$","a",null,{"href":"/mlir","style":{"textDecoration":"none"},"children":["/","mlir"]}]}],["$","h2",null,{"style":{"marginTop":0},"children":"MLIR Tutorial DataFlow Analysis 에 대하여"}],["$","div",null,{"style":{"color":"#666","marginBottom":18},"children":"2025-12-14"}],["$","p",null,{"style":{"color":"#333"},"children":"Quickstart tutorial to adding MLIR graph rewrite"}],["$","hr",null,{"style":{"border":0,"borderTop":"1px solid #eee","margin":"18px 0"}}],["$","div",null,{"className":"prose","children":[["$","p",null,{"children":"1) MLIR 에서 그래프 rewrite(변환) 은 어떻게 추가할 수 있을까?"}],"\n",["$","p",null,{"children":"일반적인 흐름은 다음과 같음"}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"1. Operation(연산) 정의\n2. Rewrite 패턴 정의 (TableGen / C++)\n3. 패턴 등록\n4. Rewrite 방식의 종류\n5. 테스트 방법\n6. 필요 시 일반 최적화 패스 작성\n\n원칙적으로는 패턴 + Rewrite Engine 사용이 권장됨.\n그래프 워커 방식은 어디까지나 개념을 설명하기 위한 것\n"}]}],"\n",["$","p",null,{"children":"2) MLIR Operation 정의 (TableGen)\nMLIR의 연산(Operation) 은 TableGen(.td) 파일로 정의가 된다.\nOperation 정의에 필요한 요소는 아래와 같음."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Operation 이름","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Dialect 내에서 유일함"}],"\n",["$","li",null,{"children":"tfl.leaky_relu"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["Traits","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"연산의 성질 (부작용이 없고, 타입이 동일함)"}],"\n",["$","li",null,{"children":"C++ 검증 로직과 연결됨"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["Arguments","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Operands : 런타임 입력 값"}],"\n",["$","li",null,{"children":"Attributes : 컴파일 타임 상수 값 (반드시 이름이 필요함)"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["Results","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"출력 값 (여러 개 가능)"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["문서화","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Summary + 상세 설명"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["Dialect 전용 메타데이터","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"ex) TFLite FlatBuffer 생성 옵션"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":"추가 기능으로서 Operation은 필요에 따라 다음을 가질 수 있음."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"Custom parser / printer"}],"\n",["$","li",null,{"children":"Builder"}],"\n",["$","li",null,{"children":"Verifier"}],"\n",["$","li",null,{"children":"Constant folder"}],"\n",["$","li",null,{"children":"Canonicalizer\n상수 폴딩은 fold() 메서드로 구현함."}],"\n"]}],"\n",["$","p",null,{"children":["3) Rewrite(그래프 변환) 개념\nMLIR에서 가장 일반적인 변환은 DAG ",["$","code",null,{"children":"->"}]," DAG 변환임.\n이를 표현하는 가장 중요한 수단이 계속 말하는 Rewrite Pattern 이다."]}],"\n",["$","p",null,{"children":"4) TableGen 기반의 Rewrite 패턴"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["기본 패턴 (Pat)","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Source DAG ",["$","code",null,{"children":"->"}]," Result DAG 형태"]}],"\n",["$","li",null,{"children":"Source에서 캡처한 값 / 속성을 Result 에서 재사용 가능"}],"\n",["$","li",null,{"children":"단순 1:1 변환에 매우 적합"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":"tf.LeakyRelu 를 tfl.LeakyRelu 로 바꾸는게 예시"}],"\n"]}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"%y = \"tf.LeakyRelu\"(%x) {alpha: 0.1} : (tensor<1xf32>) -> tensor<1xf32>\n\n에서\n\n%y = \"tfl.leaky_relu\"(%x) {alpha: 1.000000e-01} : (tensor<1xf32>) -> tensor<1xf32>\n로 바뀜.\n"}]}],"\n",["$","p",null,{"children":"IR 의미상으로는 프런트엔드 (TF) 를 백엔드/타겟(TFLite) op로 'legalize' 하는 단계임\n추가 변환이 없으면 alpha 변환 / 클램프 같은건 안하고 그냥 복사를 함."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"이제 NativeCodeCall 같은 복잡한 케이스에 대해서는"}],"\n"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"즉 TableGen으로 표현하기 어려운 경우가 있음"}],"\n",["$","li",null,{"children":"이럴 때는 C++ 함수로 직접 연산을 생성함."}],"\n",["$","li",null,{"children":"임의로 복잡한 로직이 가능함"}],"\n",["$","li",null,{"children":"다만 제약은 있는데 입력 패턴에서 다중 operand / attribute 간 제약 포현은 제한적이다."}],"\n"]}],"\n",["$","p",null,{"children":"5) 패턴은 어떻게 등록하는가?"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":".td 파일을 mlir-tblgen -gen-rewriters로 처리한다."}],"\n",["$","li",null,{"children":"CMake 설징이 필요함"}],"\n",["$","li",null,{"children":"생성된 .inc 파일을 포함해서"}],"\n",["$","li",null,{"children":"populateWithGenerated(RewritePatternSet&) 을 호출한다.\n생성된 패턴을 Pass에서 사용이 가능하다."}],"\n"]}],"\n",["$","p",null,{"children":"6) C++ 기반의 Rewrite 방식들"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"matchAndRewrite 함수 스타일"}],"\n"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"간단한 변환에 적합함"}],"\n",["$","li",null,{"children":"함수 하나로 패턴 + 리라이트를 구현함"}],"\n","$Le","\n"]}],"\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e"]}],"$L1f","$L20"]}]
21:I[80852,["/blog/_next/static/chunks/796e69ae18b2784c.js","/blog/_next/static/chunks/631eeae4923b8465.js"],"default"]
e:["$","li",null,{"children":"직접 RewritePatternSet 에 추가함\nODS 에서는 hasCanonicalizeMethod = 1 로 연산별 canonicalization 도 지원함."}]
f:["$","ol",null,{"start":"2","children":["\n",["$","li",null,{"children":"Canonicalization 메서드"}],"\n"]}]
10:["$","ul",null,{"children":["\n",["$","li",null,{"children":"Operation 자체에 귀속된 간단한 최적화"}],"\n",["$","li",null,{"children":"mul(x, power_of_2) 를 shl(x, log2) 로"}],"\n",["$","li",null,{"children":"당연히 복잡한 패턴이나 다중 연산 매칭에는 한계가 있음"}],"\n"]}]
11:["$","ol",null,{"start":"3","children":["\n",["$","li",null,{"children":"일반 RewritePattern 클래스"}],"\n"]}]
12:["$","ul",null,{"children":["\n",["$","li",null,{"children":"가장 강력하고 범용적인 방식임"}],"\n",["$","li",null,{"children":["직접","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"매칭 로직"}],"\n",["$","li",null,{"children":"리라이트 로직"}],"\n",["$","li",null,{"children":"우선순위(benefit) 지정이 가능함"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["복잡한 경우에는","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"PatternState를 사용해 match 단계의 정보를 전달함.\nmatchAndRewrite는 단일 단계 변환에 특히 편리함."}],"\n"]}],"\n"]}],"\n"]}]
13:["$","p",null,{"children":"7) Rewrite 우선 순위 (Benefit)"}]
14:["$","ul",null,{"children":["\n",["$","li",null,{"children":"C++ RewritePattern은 명시적으로 benefit을 지정함"}],"\n",["$","li",null,{"children":"TableGen 패턴은 매칭 / 대체 op 수 기반의 휴리스틱 방식임."}],"\n"]}]
15:["$","p",null,{"children":"8) 테스트는 lit + FileCheck를 이용함\nMLIR의 경우 IR 기반 테스트를 중심으로 한다.\n테스트 방식은"}]
16:["$","pre",null,{"children":["$","code",null,{"children":"입력 MLIR을 작성하고 -> mlir-opt로 특정 패스를 실행한 뒤 -> FileCheck로 결과를 검증한다.\n"}]}]
17:["$","p",null,{"children":"장점으로는"}]
18:["$","ul",null,{"children":["\n",["$","li",null,{"children":"바이너리 테스트를 최소화하고"}],"\n",["$","li",null,{"children":"IR 표현 자체를 명확히 검증하며"}],"\n",["$","li",null,{"children":"독립적이고 단순한 테스트 구성이 가능하다는 것이다."}],"\n"]}]
19:["$","p",null,{"children":"9) 최적화 패스 작성"}]
1a:["$","ul",null,{"children":["\n",["$","li",null,{"children":"패턴 기반으로 표현하기 어려운 경우"}],"\n",["$","li",null,{"children":"모듈/함수 단위 순회 패스로 구현이 가능함"}],"\n",["$","li",null,{"children":"MLIR Pass Infrastructure 사용"}],"\n"]}]
1b:["$","p",null,{"children":"====================================================================="}]
1c:["$","p",null,{"children":"요약해 보자면\nMLIR Graph Rewrite는 아래와 같은 흐름으로 구성된다."}]
1d:["$","pre",null,{"children":["$","code",null,{"children":"Operation 정의 → Rewrite 패턴(TableGen/C++) → 패턴 등록 → lit 기반 IR 테스트\n"}]}]
1e:["$","p",null,{"children":"왠만하면 패턴 기반의 Rewrite Engine을 쓰자!"}]
1f:["$","hr",null,{"style":{"border":0,"borderTop":"1px solid #eee","margin":"36px 0"}}]
20:["$","$L21",null,{}]
a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
22:I[27201,["/blog/_next/static/chunks/ff1a16fafef87110.js","/blog/_next/static/chunks/247eb132b7f7b574.js"],"IconMark"]
c:[["$","title","0",{"children":"MLIR Tutorial DataFlow Analysis 에 대하여 - CPIST's blog"}],["$","meta","1",{"name":"description","content":"Quickstart tutorial to adding MLIR graph rewrite"}],["$","link","2",{"rel":"icon","href":"/blog/favicon.ico?favicon.0b3bf435.ico","sizes":"256x256","type":"image/x-icon"}],["$","$L22","3",{}]]
8:null
